import classes from "./MainMap.module.css"
import NaverMap from 'react-naver-map';
import {useEffect, useRef, useState} from "react";
import axios from "axios";

const MainMap = () => {
    const mapRef = useRef(null);
    const [directions, setDirections] = useState(null);

    let naverMap = ""

    useEffect(() => {
        const script = document.createElement('script');
        script.src = 'https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId="gmm1qrjlur"&submodules=geocoder';
        document.head.appendChild(script);
        script.onload = () => {
            naverMap = new window.naver.maps.Map(mapRef.current, {
                center: new window.naver.maps.LatLng(35.8441357,128.6208248),
                zoom: 13
            });

            const abb = [
                {
                    x: 128.6244659,
                    y: 35.8451805
                },
                {
                    x: 128.6244659,
                    y: 35.8452721
                },
                {
                    x: 128.6244812,
                    y: 35.8453636
                },
                {
                    x: 128.624527,
                    y: 35.845768
                },
                {
                    x: 128.6245422,
                    y: 35.8460464
                },
                {
                    x: 128.624588,
                    y: 35.8464432
                },
                {
                    x: 128.6247101,
                    y: 35.8475533
                },
                {
                    x: 128.6248016,
                    y: 35.8483162
                },
                {
                    x: 128.6248016,
                    y: 35.8485069
                },
                {
                    x: 128.6248322,
                    y: 35.8486786
                },
                {
                    x: 128.6248627,
                    y: 35.8490906
                },
                {
                    x: 128.624939,
                    y: 35.850174
                },
                {
                    x: 128.625,
                    y: 35.8510284
                },
                {
                    x: 128.6250458,
                    y: 35.851532
                },
                {
                    x: 128.6251068,
                    y: 35.8521996
                },
                {
                    x: 128.6251221,
                    y: 35.8524246
                },
                {
                    x: 128.6251373,
                    y: 35.8525505
                },
                {
                    x: 128.6251373,
                    y: 35.8525963
                },
                {
                    x: 128.6251831,
                    y: 35.8531265
                },
                {
                    x: 128.6251831,
                    y: 35.8531647
                },
                {
                    x: 128.6251831,
                    y: 35.853199
                },
                {
                    x: 128.6251831,
                    y: 35.8532448
                },
                {
                    x: 128.6251678,
                    y: 35.8532829
                },
                {
                    x: 128.6251526,
                    y: 35.8533173
                },
                {
                    x: 128.6251373,
                    y: 35.8533554
                },
                {
                    x: 128.6251221,
                    y: 35.8533974
                },
                {
                    x: 128.6250916,
                    y: 35.8534355
                },
                {
                    x: 128.625061,
                    y: 35.8534698
                },
                {
                    x: 128.6250305,
                    y: 35.8535156
                },
                {
                    x: 128.6249847,
                    y: 35.8535538
                },
                {
                    x: 128.6249695,
                    y: 35.8535614
                },
                {
                    x: 128.6249542,
                    y: 35.8535881
                },
                {
                    x: 128.6248779,
                    y: 35.8536339
                },
                {
                    x: 128.6248627,
                    y: 35.8536453
                },
                {
                    x: 128.6248169,
                    y: 35.8536606
                },
                {
                    x: 128.6247406,
                    y: 35.8536987
                },
                {
                    x: 128.6246643,
                    y: 35.8537254
                },
                {
                    x: 128.6245575,
                    y: 35.8537369
                },
                {
                    x: 128.6240845,
                    y: 35.8537827
                },
                {
                    x: 128.6234589,
                    y: 35.8538322
                },
                {
                    x: 128.6231842,
                    y: 35.8538399
                },
                {
                    x: 128.6217346,
                    y: 35.8539391
                },
                {
                    x: 128.6208801,
                    y: 35.8539963
                },
                {
                    x: 128.6197357,
                    y: 35.8540649
                },
                {
                    x: 128.6187592,
                    y: 35.8541336
                },
                {
                    x: 128.6173859,
                    y: 35.8542213
                },
                {
                    x: 128.6168671,
                    y: 35.8542519
                },
                {
                    x: 128.6163177,
                    y: 35.85429
                },
                {
                    x: 128.6161804,
                    y: 35.8543015
                },
                {
                    x: 128.6160583,
                    y: 35.8543129
                },
                {
                    x: 128.6159058,
                    y: 35.8543205
                },
                {
                    x: 128.6157684,
                    y: 35.854332
                },
                {
                    x: 128.6152954,
                    y: 35.8543587
                },
                {
                    x: 128.6145325,
                    y: 35.8544083
                },
                {
                    x: 128.6139832,
                    y: 35.8544464
                },
                {
                    x: 128.6132355,
                    y: 35.854496
                },
                {
                    x: 128.612854,
                    y: 35.8545265
                },
                {
                    x: 128.6123962,
                    y: 35.854557
                },
                {
                    x: 128.6120758,
                    y: 35.8545761
                },
                {
                    x: 128.6116791,
                    y: 35.8545952
                },
                {
                    x: 128.6113434,
                    y: 35.8546143
                },
                {
                    x: 128.6112671,
                    y: 35.8546257
                },
                {
                    x: 128.6105652,
                    y: 35.8546906
                },
                {
                    x: 128.6099243,
                    y: 35.8547554
                },
                {
                    x: 128.6095581,
                    y: 35.8547859
                },
                {
                    x: 128.6090088,
                    y: 35.8548431
                },
                {
                    x: 128.6085205,
                    y: 35.8548889
                },
                {
                    x: 128.6082001,
                    y: 35.8549004
                },
                {
                    x: 128.6080627,
                    y: 35.8549118
                },
                {
                    x: 128.6079102,
                    y: 35.8549118
                },
                {
                    x: 128.6075287,
                    y: 35.8549309
                },
                {
                    x: 128.607132,
                    y: 35.85495
                },
                {
                    x: 128.6068726,
                    y: 35.8549614
                },
                {
                    x: 128.6066132,
                    y: 35.8549805
                },
                {
                    x: 128.6063538,
                    y: 35.8549995
                },
                {
                    x: 128.6060791,
                    y: 35.8550186
                },
                {
                    x: 128.6050873,
                    y: 35.8550873
                },
                {
                    x: 128.604126,
                    y: 35.8551559
                },
                {
                    x: 128.6030884,
                    y: 35.855217
                },
                {
                    x: 128.6006165,
                    y: 35.8553543
                },
                {
                    x: 128.5997009,
                    y: 35.8554115
                },
                {
                    x: 128.5995636,
                    y: 35.8554115
                },
                {
                    x: 128.5994263,
                    y: 35.855423
                },
                {
                    x: 128.5990601,
                    y: 35.855442
                },
                {
                    x: 128.5986481,
                    y: 35.8554916
                },
                {
                    x: 128.5983734,
                    y: 35.8555527
                },
                {
                    x: 128.5981445,
                    y: 35.8556442
                },
                {
                    x: 128.5979919,
                    y: 35.8557358
                },
                {
                    x: 128.5978699,
                    y: 35.8558006
                },
                {
                    x: 128.5975494,
                    y: 35.8559647
                },
                {
                    x: 128.5973816,
                    y: 35.8560562
                },
                {
                    x: 128.5971375,
                    y: 35.856163
                },
                {
                    x: 128.5969391,
                    y: 35.8562393
                },
                {
                    x: 128.5968018,
                    y: 35.8562851
                },
                {
                    x: 128.5964355,
                    y: 35.8563499
                },
                {
                    x: 128.5959015,
                    y: 35.8564034
                },
                {
                    x: 128.5950775,
                    y: 35.8564987
                },
                {
                    x: 128.5942535,
                    y: 35.8565941
                },
                {
                    x: 128.5936584,
                    y: 35.8566589
                },
                {
                    x: 128.5930481,
                    y: 35.8567238
                },
                {
                    x: 128.5920715,
                    y: 35.8568382
                },
                {
                    x: 128.5915833,
                    y: 35.8568954
                },
                {
                    x: 128.5914154,
                    y: 35.8569145
                },
                {
                    x: 128.5912476,
                    y: 35.8569336
                },
                {
                    x: 128.5911102,
                    y: 35.8569527
                },
                {
                    x: 128.5909882,
                    y: 35.8569603
                },
                {
                    x: 128.5909119,
                    y: 35.8569717
                },
                {
                    x: 128.5907593,
                    y: 35.8569717
                },
                {
                    x: 128.5906677,
                    y: 35.8569794
                },
                {
                    x: 128.5904999,
                    y: 35.8569832
                },
                {
                    x: 128.5903931,
                    y: 35.8569832
                },
                {
                    x: 128.5902252,
                    y: 35.8569641
                },
                {
                    x: 128.5901031,
                    y: 35.8569565
                },
                {
                    x: 128.5899506,
                    y: 35.8569374
                },
                {
                    x: 128.589798,
                    y: 35.8569221
                },
                {
                    x: 128.589325,
                    y: 35.8568802
                },
                {
                    x: 128.5888672,
                    y: 35.8568344
                },
                {
                    x: 128.5879974,
                    y: 35.8567581
                },
                {
                    x: 128.5873566,
                    y: 35.8567009
                },
                {
                    x: 128.5867767,
                    y: 35.8566475
                },
                {
                    x: 128.5862122,
                    y: 35.8565979
                },
                {
                    x: 128.5856171,
                    y: 35.8565369
                },
                {
                    x: 128.5850983,
                    y: 35.8564949
                },
                {
                    x: 128.5847168,
                    y: 35.8564606
                },
                {
                    x: 128.5846863,
                    y: 35.8564606
                },
                {
                    x: 128.5844879,
                    y: 35.8564529
                },
                {
                    x: 128.5842133,
                    y: 35.8564453
                },
                {
                    x: 128.5839539,
                    y: 35.8564835
                },
                {
                    x: 128.5838623,
                    y: 35.8564987
                },
                {
                    x: 128.583725,
                    y: 35.8565369
                },
                {
                    x: 128.5836792,
                    y: 35.8565445
                },
                {
                    x: 128.5835571,
                    y: 35.8566017
                },
                {
                    x: 128.5834351,
                    y: 35.8566551
                },
                {
                    x: 128.5832825,
                    y: 35.8567085
                },
                {
                    x: 128.5831604,
                    y: 35.8567734
                },
                {
                    x: 128.5830536,
                    y: 35.8568192
                },
                {
                    x: 128.5830078,
                    y: 35.8568459
                },
                {
                    x: 128.582962,
                    y: 35.8568993
                },
                {
                    x: 128.5829163,
                    y: 35.8569374
                },
                {
                    x: 128.582901,
                    y: 35.8569641
                },
                {
                    x: 128.5828857,
                    y: 35.8570023
                },
                {
                    x: 128.5828552,
                    y: 35.857029
                },
                {
                    x: 128.58284,
                    y: 35.8570633
                },
                {
                    x: 128.5828094,
                    y: 35.8571014
                },
                {
                    x: 128.5827942,
                    y: 35.8571625
                },
                {
                    x: 128.5827637,
                    y: 35.8572159
                },
                {
                    x: 128.5827637,
                    y: 35.8572807
                },
                {
                    x: 128.5827637,
                    y: 35.8573151
                },
                {
                    x: 128.5827484,
                    y: 35.8573341
                },
                {
                    x: 128.5827484,
                    y: 35.8573608
                },
                {
                    x: 128.5827484,
                    y: 35.8573875
                },
                {
                    x: 128.5827332,
                    y: 35.8575706
                },
                {
                    x: 128.5827179,
                    y: 35.8579102
                },
                {
                    x: 128.5827179,
                    y: 35.8581657
                },
                {
                    x: 128.5826569,
                    y: 35.8590469
                },
                {
                    x: 128.5826263,
                    y: 35.8597412
                },
                {
                    x: 128.5825958,
                    y: 35.8600578
                },
                {
                    x: 128.5825958,
                    y: 35.860302
                },
                {
                    x: 128.5825653,
                    y: 35.8607979
                },
                {
                    x: 128.5825195,
                    y: 35.8614197
                },
                {
                    x: 128.5825195,
                    y: 35.8616524
                },
                {
                    x: 128.582489,
                    y: 35.8618622
                },
                {
                    x: 128.5824585,
                    y: 35.8624725
                },
                {
                    x: 128.5823975,
                    y: 35.863205
                },
                {
                    x: 128.5823669,
                    y: 35.8634377
                },
                {
                    x: 128.5823669,
                    y: 35.8635483
                },
                {
                    x: 128.5823669,
                    y: 35.8636017
                },
                {
                    x: 128.5823517,
                    y: 35.8639526
                },
                {
                    x: 128.5823517,
                    y: 35.8640709
                },
                {
                    x: 128.5823517,
                    y: 35.864212
                }
            ]

            const asd = abb.map((ele) => {
                return new window.naver.maps.LatLng(ele.y, ele.x)
            })


            const polyline = new window.naver.maps.Polyline({
                map: naverMap,
                path: asd,
                strokeColor: '#5347AA',
                strokeWeight: 6
            });

        };
    }, [])

    const geoCode = () => {
        const apiUrl = 'https://naveropenapi.apigw.ntruss.com/map-geocode/v2/geocode';
        const query = '분당구 불정로 6';
        const coordinate = '127.1054328,37.3595963';
        const clientId = 'gmm1qrjlur';
        const clientSecret = 'oS6wvEtaPKSJ9D4hHNK0gALmuQrnr6vcSzFdLAU3';

        const config = {
            headers: {
                'X-NCP-APIGW-API-KEY-ID': clientId,
                'X-NCP-APIGW-API-KEY': clientSecret
            },
            params: {
                query: query,
                coordinate: coordinate
            }
        };

        // GET 요청 보내기
        axios.get(apiUrl, config)
            .then(response => {
                console.log(response.data);
            })
            .catch(error => {
                console.error(error);
            });
    }

    const fetchData = async () => {
        try {
            const response = await axios.get('https://naveropenapi.apigw.ntruss.com/map-direction/v1/driving', {
                params: {
                    start: '126.977677,37.584723',
                    goal: '127.004126,37.560909',
                },
                headers: {
                    'X-NCP-APIGW-API-KEY-ID': 'gmm1qrjlur',
                    'X-NCP-APIGW-API-KEY': 'hxJA1aF04b7vqc7YTKPnDqa0wS5vZSxsXEvmvVo1',
                },
            });

            setDirections(response.data);
        } catch (error) {
            console.error(error);
        }
    };


    return (
        <div>
            <div
                id="map"
                style={{ width: '100%', height: '100vh' }}
                ref={mapRef}
            />
        </div>
    );
};

export default MainMap
